# 端到端实验设计说明文档

## 📋 实验设计概述

### 实验目标

评估 **算法1（IoT-UAV数据收集）** 和 **算法2（UAV-LEO卫星传输）** 的端到端联合性能。

### 核心研究问题

1. **P1+Demand-Aware组合** 是否优于其他方案？
2. 算法1的优化对端到端性能的贡献？
3. 算法2的优化对端到端性能的贡献？
4. 两个算法是否存在协同效应？

---

## 🧪 实验设计方法

### 2×2 因子设计（Factorial Design）

| 因子 | 水平1 | 水平2 |
|------|-------|-------|
| **算法1** | P1优化 | F-scheme |
| **算法2** | Demand-Aware | Greedy |

**组合方案（4个对照组）**:

```
         算法2 →
算法1 ↓   Demand-Aware    Greedy
------------------------------------
P1        G1 (提出)       G2
F-scheme  G3              G4 (基线)
```

### 各组说明

| 组别 | 算法1 | 算法2 | 类型 | 作用 |
|------|-------|-------|------|------|
| **G1** | P1 | Demand-Aware | 提出方法 | 完整优化方案 |
| **G2** | P1 | Greedy | 半优化A | 控制算法2，评估算法1贡献 |
| **G3** | F-scheme | Demand-Aware | 半优化B | 控制算法1，评估算法2贡献 |
| **G4** | F-scheme | Greedy | 传统基线 | 总体基线参考 |

---

## 📊 指标体系

### 一级指标（核心评估指标）

#### 1. 端到端总时延（E2E Latency）

**定义**:
```
T_E2E = T_collection + T_transmission + T_handover_overhead

其中:
- T_collection = T_hover + T_flight (算法1)
- T_transmission = 600s - T_handover (算法2，10分钟传输)
- T_handover = N_handover × 0.4s (切换开销)
```

**意义**: 衡量从IoT设备开始传输到数据到达地面站的总时间

**期望**: G1 < G2 < G3 < G4

---

#### 2. 系统总能耗（System Energy）

**定义**:
```
E_system = E_UAV + E_IoT

其中:
- E_UAV = E_hover + E_flight (算法1输出)
- E_IoT = P_IoT × T_hover (简化计算，P_IoT = 0.1W)
```

**意义**: 衡量整个系统的能量消耗

**期望**: G1 << G2 ≈ G4 < G3

**重要性**: 这是算法1的主要优化目标

---

#### 3. 数据传输成功率（Delivery Success Rate）

**定义**:
```
η_delivery = 1 - PLR

其中:
- PLR = T_handover / T_total (丢包率)
```

**意义**: 衡量数据传输的可靠性

**期望**: G1 > G3 > G2 ≈ G4

**重要性**: 切换导致的丢包是关键质量指标

---

## 🔬 对比分析矩阵

### 主效应分析

| 对比 | 控制变量 | 变化变量 | 评估内容 |
|------|---------|---------|----------|
| **G1 vs G2** | 算法1=P1 | 算法2变化 | 算法2（DA vs Greedy）的影响 |
| **G1 vs G3** | 算法2=DA | 算法1变化 | 算法1（P1 vs F）的影响 |
| **G1 vs G4** | 无 | 两者都变化 | 完整方案的总体增益 |

### 协同效应分析

**计算方法**:
```
Synergy = Gain(G1 vs G4) - [Gain(G2 vs G4) + Gain(G3 vs G4)]

如果 Synergy > 0，说明存在正向协同效应
如果 Synergy < 0，说明存在负向干扰
```

**示例**:
- G1相比G4节省30%能耗
- G2相比G4节省10%能耗（仅P1贡献）
- G3相比G4节省5%能耗（仅DA贡献）
- 协同增益 = 30% - (10% + 5%) = **15%**（额外增益）

---

## 🎯 实验参数配置

### 固定参数（确保可比性）

| 参数 | 数值 | 来源/理由 |
|------|------|----------|
| UAV数量 | 3 | 算法1设定 |
| UAV高度 | 200m | 算法1和算法2一致 |
| 区域大小 | 500×500m | 算法1设定 |
| IoT数据量 | 100KB-1MB | 算法1设定 |
| 卫星数量 | 1500颗 | 算法2最优场景 |
| 需求速率 | 8 Mbps | 1080p视频流标准 |
| 传输时长 | 10分钟 | 算法2设定 |
| 切换时延 | 0.4秒 | 文献标准值 |

### 变化参数（自变量）

**主实验**: 固定 K=40（中等规模）

**扩展实验**（可选）:
- IoT设备数量: K ∈ {20, 30, 40, 50}
- 卫星需求速率: D ∈ {4, 8, 16, 20} Mbps

### 重复实验（统计可靠性）

- **随机种子**: [27, 37, 41]（3次重复）
- **理由**: 这3个种子是算法1性能最优的场景（来自find_best_p1_scenario.py）

---

## 📈 预期结果与假设

### 核心假设

**H1（主假设）**: G1的系统总能耗显著低于G4
- **预期**: 节省 20-30%
- **统计检验**: t-test, p < 0.05

**H2**: G1的端到端时延低于G4
- **预期**: 减少 10-15%
- **来源**: P1轨迹优化 + DA稳定传输

**H3**: G1的传输成功率高于G2
- **预期**: 提升 0.4-0.6% (绝对值)
- **来源**: DA减少切换和丢包

**H4（协同效应）**: G1的增益 > G2增益 + G3增益
- **预期**: 存在正向协同效应
- **意义**: 证明两算法联合优化的价值

### 预期性能排序

| 指标 | 预期排序（从好到坏） | 关键因素 |
|------|---------------------|----------|
| 系统能耗 | G1 < G2 < G3 < G4 | P1的UAV能耗优化 |
| 端到端时延 | G1 < G2 ≈ G4 < G3 | P1轨迹优化 + DA稳定性 |
| 传输成功率 | G1 > G3 > G2 ≈ G4 | DA减少切换 |

---

## 🔍 数据分析计划

### 1. 描述性统计

对每个组计算:
- 均值（Mean）
- 标准差（Std）
- 最小值、最大值
- 中位数

### 2. 推断统计

**方差分析（ANOVA）**:
- 零假设: 4组的均值无显著差异
- 备择假设: 至少有一组显著不同
- 显著性水平: α = 0.05

**事后检验（Post-hoc）**:
- 成对t检验（G1 vs G2, G1 vs G3, G1 vs G4）
- Bonferroni校正（控制多重比较的假阳性）

**效应量（Effect Size）**:
- Cohen's d: 量化改进幅度
- 解释: d > 0.8 为大效应，d > 0.5 为中等效应

### 3. 可视化

**必须图表**:
- 柱状图: 3个指标的4组对比
- 箱线图: 显示分布和离群值
- 误差棒: 显示标准差或置信区间

**可选图表**:
- 雷达图: 多维度性能对比
- 散点图: 能耗-时延权衡分析
- 瀑布图: 协同效应分解

---

## 📋 实验流程

### 阶段1: 准备（5分钟）

1. 检查依赖包安装
2. 确认算法1和算法2代码完整
3. 下载starlink.tle文件
4. 运行快速测试验证环境

### 阶段2: 主实验（5-10分钟）

1. 运行4组×3种子的实验
2. 实时监控进度和错误
3. 保存原始结果

### 阶段3: 数据分析（自动完成）

1. 计算描述性统计
2. 进行显著性检验
3. 生成对比分析
4. 保存结果文件

### 阶段4: 结果解读

1. 验证假设是否成立
2. 分析异常结果
3. 总结关键发现

---

## 💡 结果解读指南

### G1优于其他组的标志

✅ **能耗**: G1比G4低 20%+
✅ **时延**: G1比G4低 10%+
✅ **成功率**: G1比G2高 0.4%+
✅ **协同效应**: 正向增益 > 0

### 可能的异常情况

❌ **G1能耗不是最低**
- 可能原因: P1优化未收敛
- 检查: 算法1的迭代次数和收敛性

❌ **G1成功率不比G3高**
- 可能原因: Demand-Aware阈值设置不当
- 检查: 需求速率是否过高/过低

❌ **负向协同效应**
- 可能原因: 算法1输出不适配算法2输入
- 检查: 数据收集时间是否过长影响传输窗口

---

## 📚 实验设计理论依据

### 因子设计法（Factorial Design）

**优势**:
1. 可以同时评估多个因素
2. 可以检测交互效应
3. 实验效率高（4组而非6组）

**适用场景**:
- 两个独立的优化算法
- 需要评估联合效果
- 计算资源有限

### 对照实验原则

**单一变量原则**:
- G1 vs G2: 只改变算法2
- G1 vs G3: 只改变算法1

**基线对照**:
- G4作为传统方法基线
- 所有改进以G4为参考

**重复实验**:
- 使用3个随机种子
- 计算均值和标准差
- 确保结果可靠性

---

## 🎓 学术价值

### 创新点

1. **端到端联合优化**: 首次将IoT-UAV和UAV-LEO两阶段联合评估
2. **协同效应量化**: 明确两个算法的独立贡献和交互增益
3. **实用性验证**: 使用真实Starlink卫星数据

### 论文贡献

**理论贡献**:
- 证明联合优化优于单独优化
- 量化各算法的边际贡献

**实验贡献**:
- 严谨的对照实验设计
- 完整的开源实现代码

**应用贡献**:
- 为实际部署提供性能基准
- 为系统设计提供参数指导

---

## 📝 引用与致谢

本实验设计参考了以下方法论:

- **因子设计**: Montgomery, D. C. (2017). *Design and Analysis of Experiments*
- **对照实验**: Fisher, R. A. (1935). *The Design of Experiments*
- **统计检验**: Field, A. (2013). *Discovering Statistics Using IBM SPSS*

---

**文档版本**: v1.0
**最后更新**: 2025-12-06
**作者**: 实验设计团队
